.. _query-bar-filter:

=============================
Filter the Returned Documents
=============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can type MongoDB filter documents into the query bar to display only
documents which match the specified criteria. To learn more about
querying documents, see :manual:`Query Documents
</tutorial/query-documents/>` in the MongoDB manual.

Set Query Filter
----------------

#. In the :guilabel:`Filter` field, enter a filter document. You can use
   all of the MongoDB :manual:`query operators
   </reference/operator/query/>` except the :query:`$text` and
   :query:`$expr` operators.

   .. example::

      The following filter only returns documents which have a ``Country``
      value of ``Brazil``:
      
      .. code-block:: json
      
         { Country: "Brazil" }

#. .. include:: /includes/run-query.rst

   .. figure:: /images/querybar/query-filter-success.png
      :figwidth: 600px
      :lightbox:

.. note::

   .. include:: /includes/extracts/query-bar-results.rst

Supported Data Types in the Query Bar
-------------------------------------

The Compass :guilabel:`Filter` supports using the
:binary:`~bin.mongo` shell mode representation of the MongoDB
Extended JSON :manual:`BSON data types </reference/mongodb-extended-json#bson-data-types-and-associated-representations>`.

.. example::

   The following filter returns documents where
   ``start_date`` is greater than than the BSON ``Date``
   ``2017-05-01``:

   .. code-block:: javascript

      { "start_date": {$gt: new Date('2017-05-01')} }

   By specifying the ``Date`` type in both ``start_date`` and the
   ``$gt`` comparison operator, Compass performs the ``greater
   than`` comparison chronologically, returning documents with
   ``start_date`` later than ``2017-05-01``.

   Without the ``Date`` type specification, Compass compares the
   ``start_dates`` as strings
   `lexicographically <https://en.wikipedia.org/wiki/Lexicographical_order>`_,
   instead of comparing the values chronologically.


Clear the Query
---------------

.. include:: /includes/clear-query.rst

How Does the Compass Query Compare to MongoDB and SQL Queries?
--------------------------------------------------------------

:expression:`$filter` corresponds to the ``WHERE`` clause in a
|sql| ``SELECT`` statement.

.. example::

   You have 3,235 articles. You would like to see all articles
   that Joe Bloggs wrote.

   Compass Filter Option
      .. code-block:: javascript

         { author : { $eq : "Joe Bloggs" } }

   MongoDB Aggregation
      .. code-block:: javascript

         db.article.aggregate(
           { $filter : { author : { $eq : "Joe Bloggs" } } }
         );

   SQL
      .. code-block:: sql

         SELECT * FROM article
         WHERE author = "Joe Bloggs";
