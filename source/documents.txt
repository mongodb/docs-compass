
=========
Documents
=========

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. _documents-tab:

Documents Tab
-------------

From the :guilabel:`Documents` tab, you can view, insert, clone, modify, and
delete documents.


View Documents
--------------

Use the Documents tab to view individual documents. When the Documents
tab loads, Compass displays all documents that match your query criteria
(or all documents within the sample if no query criteria was
specified).

.. figure:: /images/compass/doc-view.svg
  :figwidth: 800px

Insert Documents
----------------

Click the :guilabel:`Insert Document` button to insert a new document:

.. figure:: /images/compass/insert-button.png
  :figwidth: 800px

The insert dialog appears:

.. figure:: /images/compass/insert-document.png
  :figwidth: 598px

For each new field in the document, select field type and fill in the
field name and value.

.. figure:: /images/compass/insert-document2.png
  :figwidth: 627px

To add a new field for the document, hover over the row number in the
dialog (the row number is not part of the document but the dialog
display) and click on the plus sign add a new field after the field.

.. figure:: /images/compass/insert-document-new-field.svg
  :figwidth: 621px

.. tip::

   You can also add a new field at the end by hitting the Tab from the
   value of the last field.

You can change the data type of a field by using the data type
selectors on the right of the field.

.. figure:: /images/compass/insert-document3.png
  :figwidth: 644px

.. tip::

   To add a new field after an array or a document field, hover over
   the row number in the dialog (the row number is not part of the
   document but the dialog display) and click on the plus sign add a
   new field after the field.

To change the ``_id`` field to use a custom value, change
the data type from ``ObjectID`` to ``string`` and then overwrite the
``_id`` value:

.. figure:: /images/compass/insert-document4.png
  :figwidth: 626px

Clone Documents
---------------

It is also possible to insert new documents by cloning
the schema and values of an existing document in a collection.

To clone a document, hover over the desired document
and click the :guilabel:`Clone` button.

.. figure:: /images/compass/clone-doc.png
  :figwidth: 740px

This creates a new insert dialog with the same schema
and values. You can edit any of these fields and values before
you insert the new document.

.. figure:: /images/compass/clone-doc2.png
  :figwidth: 740px


Modify Documents
----------------

To edit a document, hover over the document and select the pencil icon:

.. figure:: /images/compass/edit-doc.png
  :figwidth: 740px

After you click the pencil icon, the document enters edit mode:

.. figure:: /images/compass/edit-doc2.png
  :figwidth: 740px

You can now make changes to the fields, values, or data types
of values. You can delete fields by selecting the ``x`` icon to the
left of the field:

.. figure:: /images/compass/edit-doc3.png
  :figwidth: 740px

Once selected, the field is marked for removal and appears
highlighted in red:

.. figure:: /images/compass/edit-doc4.png
  :figwidth: 740px

To insert a new field, click or tab to the end of the document and
fill in the field/value. New fields appear highlighted in green:

.. figure:: /images/compass/edit-doc5.png
  :figwidth: 740px

You can modify documents by clicking on existing field names or
values and making changes. In this example, the flight status was
changed from ``L`` to ``M``. Changed fields appear highlighted in
yellow:

.. figure:: /images/compass/update-field.png
  :figwidth: 740px

When you are finished editing the document, click the ``Update``
button to commit your changes.

Copying JSON Into Fields

Valid JSON which can be parsed by Javascript's JSON.parse can be pasted into fields. If the pasted value is an Array or Object, the value will be converted. The formats rules are as follows:

Objects

Object keys must be quoted in double quotes, and are permitted to be escaped. The first characted of the string must be { and the last must be }:

.. code-block:: javascript

  {
    "email": "test@example.com",
    "phone": "555-555-1212"
  }

Arrays

The first character in the string must be a [ and the last must be a ]:

.. code-block:: javascript

  [ "first", "second", 3 ]

Adding an Element
----------------

A new element can be added to the document or any embedded document by either clicking on the right side of the element or tabbing off the last element's value field if the element is the last element in the document or sub document. Clicking to the right of an element will also remove any subsequent extra empty elements.

Delete Documents
----------------

From the :guilabel:`Documents` view, you can delete documents by
hovering over the document and selecting the trash icon:

.. figure:: /images/compass/delete-doc.png
  :figwidth: 740px

The document is marked for deletion and Compass
asks for confirmation that you want to remove the document:

.. figure:: /images/compass/delete-doc2.png
  :figwidth: 740px

After you confirm, Compass deletes the document
from the collection.

Reverting a Change
----------------

A change to an element can be reverted by clicking the revert icon  to the left of the element's line number.

Persisting Changes
----------------

The changes to a document may be persisted by clicking on the 'Update' button in the footer of the document panel. Clicking this button will execute a $findAndModify on the server and update the document in the list.

Canceling Changes
----------------

To exit edit mode and cancel all pending changes, click the 'Cancel' button.
